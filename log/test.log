  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "customer_name" varchar NOT NULL, "product_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "supplier_id" integer, "supplier_reference" varchar)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_orders_on_product_id" ON "orders" ("product_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_orders_on_supplier_id" ON "orders" ("supplier_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_products_on_name" ON "products" ("name")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "suppliers"[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "suppliers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_suppliers_on_name" ON "suppliers" ("name")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorders" ("id" integer NOT NULL PRIMARY KEY, "customer_name" varchar NOT NULL, "product_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "supplier_id" integer DEFAULT NULL, "supplier_reference" varchar DEFAULT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorders_on_supplier_id" ON "aorders" ("supplier_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorders_on_product_id" ON "aorders" ("product_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aorders" ("id","customer_name","product_id","created_at","updated_at","supplier_id","supplier_reference")
                     SELECT "id","customer_name","product_id","created_at","updated_at","supplier_id","supplier_reference" FROM "orders"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer NOT NULL PRIMARY KEY, "customer_name" varchar NOT NULL, "product_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "supplier_id" integer DEFAULT NULL, "supplier_reference" varchar DEFAULT NULL, CONSTRAINT "fk_rails_dfb33b2de0"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_orders_on_product_id" ON "orders" ("product_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_orders_on_supplier_id" ON "orders" ("supplier_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("id","customer_name","product_id","created_at","updated_at","supplier_id","supplier_reference")
                     SELECT "id","customer_name","product_id","created_at","updated_at","supplier_id","supplier_reference" FROM "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210513143700)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210513102325),
(20210513103623),
(20210513141644);

[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-07-11 15:02:12.427441"], ["updated_at", "2023-07-11 15:02:12.427441"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "73144ca8899456c05feb8bd15a007dddd106a8fd"], ["created_at", "2023-07-11 15:02:12.429000"], ["updated_at", "2023-07-11 15:02:12.429000"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 15:02:12.456181"], ["updated_at", "2023-07-11 15:02:12.456181"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 15:02:12.460675"], ["updated_at", "2023-07-11 15:02:12.460675"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 15:02:12.461240"], ["updated_at", "2023-07-11 15:02:12.461240"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 15:02:12.461513"], ["updated_at", "2023-07-11 15:02:12.461513"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 15:02:12.475165"], ["updated_at", "2023-07-11 15:02:12.475165"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 15:02:12.475687"], ["updated_at", "2023-07-11 15:02:12.475687"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 15:02:12.476136"], ["updated_at", "2023-07-11 15:02:12.476136"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 15:02:12.476394"], ["updated_at", "2023-07-11 15:02:12.476394"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 15:02:12.480363"], ["updated_at", "2023-07-11 15:02:12.480363"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 15:02:12.480850"], ["updated_at", "2023-07-11 15:02:12.480850"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 15:02:12.481300"], ["updated_at", "2023-07-11 15:02:12.481300"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 15:02:12.481559"], ["updated_at", "2023-07-11 15:02:12.481559"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 15:02:12.482529"], ["updated_at", "2023-07-11 15:02:12.482529"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-11 15:02:12.486146"], ["supplier_id", 1], ["supplier_reference", "a3864b10-67b5-4bff-8d5e-ea80863ed7dd"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-11 15:02:12.486757"], ["supplier_id", 1], ["supplier_reference", "641ae0a0-99f5-457e-8afa-6d25885cfe94"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 15:02:12.494776"], ["updated_at", "2023-07-11 15:02:12.494776"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 15:02:12.495917"], ["updated_at", "2023-07-11 15:02:12.495917"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 15:02:12.497888"], ["updated_at", "2023-07-11 15:02:12.497888"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 15:02:12.499748"], ["updated_at", "2023-07-11 15:02:12.499748"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 15:02:12.501603"], ["updated_at", "2023-07-11 15:02:12.501603"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 15:02:12.503169"], ["updated_at", "2023-07-11 15:02:12.503169"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 16:39:02.212745"], ["updated_at", "2023-07-11 16:39:02.212745"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 16:39:02.215602"], ["updated_at", "2023-07-11 16:39:02.215602"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 16:39:02.216150"], ["updated_at", "2023-07-11 16:39:02.216150"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 16:39:02.216409"], ["updated_at", "2023-07-11 16:39:02.216409"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 16:39:02.220769"], ["updated_at", "2023-07-11 16:39:02.220769"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 16:39:02.221173"], ["updated_at", "2023-07-11 16:39:02.221173"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 16:39:02.221610"], ["updated_at", "2023-07-11 16:39:02.221610"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 16:39:02.221858"], ["updated_at", "2023-07-11 16:39:02.221858"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 16:39:02.223677"], ["updated_at", "2023-07-11 16:39:02.223677"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 16:39:02.224019"], ["updated_at", "2023-07-11 16:39:02.224019"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 16:39:02.224427"], ["updated_at", "2023-07-11 16:39:02.224427"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 16:39:02.224666"], ["updated_at", "2023-07-11 16:39:02.224666"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 16:39:02.225503"], ["updated_at", "2023-07-11 16:39:02.225503"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-11 16:39:02.227124"], ["supplier_id", 1], ["supplier_reference", "f9fc7af4-d31f-422b-b183-5b26e053bc20"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-11 16:39:02.227644"], ["supplier_id", 1], ["supplier_reference", "d0b7d5a2-e833-4986-9dfc-cbfe04ecb904"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 16:39:02.231927"], ["updated_at", "2023-07-11 16:39:02.231927"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 16:39:02.238840"], ["updated_at", "2023-07-11 16:39:02.238840"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 16:39:02.241400"], ["updated_at", "2023-07-11 16:39:02.241400"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 16:39:02.243433"], ["updated_at", "2023-07-11 16:39:02.243433"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 16:39:02.245778"], ["updated_at", "2023-07-11 16:39:02.245778"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 16:39:02.248052"], ["updated_at", "2023-07-11 16:39:02.248052"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:07:51.155116"], ["updated_at", "2023-07-11 22:07:51.155116"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (1.3ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:07:51.158513"], ["updated_at", "2023-07-11 22:07:51.158513"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:07:51.160424"], ["updated_at", "2023-07-11 22:07:51.160424"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:07:51.160706"], ["updated_at", "2023-07-11 22:07:51.160706"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:08:55.384572"], ["updated_at", "2023-07-11 22:08:55.384572"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:08:55.390550"], ["updated_at", "2023-07-11 22:08:55.390550"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:08:55.397782"], ["updated_at", "2023-07-11 22:08:55.397782"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:08:55.402348"], ["updated_at", "2023-07-11 22:08:55.402348"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:08:55.421693"], ["updated_at", "2023-07-11 22:08:55.421693"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:08:55.426077"], ["updated_at", "2023-07-11 22:08:55.426077"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:08:55.432087"], ["updated_at", "2023-07-11 22:08:55.432087"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:08:55.435842"], ["updated_at", "2023-07-11 22:08:55.435842"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:08:55.453163"], ["updated_at", "2023-07-11 22:08:55.453163"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.2ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:08:55.496483"], ["updated_at", "2023-07-11 22:08:55.496483"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:08:55.507040"], ["updated_at", "2023-07-11 22:08:55.507040"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:08:55.531419"], ["updated_at", "2023-07-11 22:08:55.531419"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:08:55.552734"], ["updated_at", "2023-07-11 22:08:55.552734"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.4ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:08:55.602726"], ["updated_at", "2023-07-11 22:08:55.602726"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:08:55.622561"], ["updated_at", "2023-07-11 22:08:55.622561"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:09:02.006006"], ["updated_at", "2023-07-11 22:09:02.006006"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:09:02.008680"], ["updated_at", "2023-07-11 22:09:02.008680"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:09:02.009214"], ["updated_at", "2023-07-11 22:09:02.009214"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:09:02.009491"], ["updated_at", "2023-07-11 22:09:02.009491"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:09:02.013197"], ["updated_at", "2023-07-11 22:09:02.013197"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:09:02.013612"], ["updated_at", "2023-07-11 22:09:02.013612"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:09:02.014048"], ["updated_at", "2023-07-11 22:09:02.014048"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:09:02.014294"], ["updated_at", "2023-07-11 22:09:02.014294"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:09:02.015977"], ["updated_at", "2023-07-11 22:09:02.015977"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:09:02.016328"], ["updated_at", "2023-07-11 22:09:02.016328"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:09:02.016721"], ["updated_at", "2023-07-11 22:09:02.016721"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:09:02.016962"], ["updated_at", "2023-07-11 22:09:02.016962"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:09:02.017790"], ["updated_at", "2023-07-11 22:09:02.017790"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mSupplier Load (0.3ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:19:06.655484"], ["updated_at", "2023-07-11 22:19:06.655484"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:19:06.666513"], ["updated_at", "2023-07-11 22:19:06.666513"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:19:06.692287"], ["updated_at", "2023-07-11 22:19:06.692287"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:19:06.714214"], ["updated_at", "2023-07-11 22:19:06.714214"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.4ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:19:06.739137"], ["updated_at", "2023-07-11 22:19:06.739137"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:19:06.760376"], ["updated_at", "2023-07-11 22:19:06.760376"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:24:04.403831"], ["updated_at", "2023-07-11 22:24:04.403831"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:24:04.406601"], ["updated_at", "2023-07-11 22:24:04.406601"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:24:04.407135"], ["updated_at", "2023-07-11 22:24:04.407135"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:24:04.407391"], ["updated_at", "2023-07-11 22:24:04.407391"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:24:04.412878"], ["updated_at", "2023-07-11 22:24:04.412878"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:24:04.413326"], ["updated_at", "2023-07-11 22:24:04.413326"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:24:04.413914"], ["updated_at", "2023-07-11 22:24:04.413914"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:24:04.414225"], ["updated_at", "2023-07-11 22:24:04.414225"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:24:04.416348"], ["updated_at", "2023-07-11 22:24:04.416348"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:24:04.416734"], ["updated_at", "2023-07-11 22:24:04.416734"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:24:04.417153"], ["updated_at", "2023-07-11 22:24:04.417153"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:24:04.417403"], ["updated_at", "2023-07-11 22:24:04.417403"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:24:04.418860"], ["updated_at", "2023-07-11 22:24:04.418860"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:24:54.429741"], ["updated_at", "2023-07-11 22:24:54.429741"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:24:54.439103"], ["updated_at", "2023-07-11 22:24:54.439103"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:24:54.459209"], ["updated_at", "2023-07-11 22:24:54.459209"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:24:54.476831"], ["updated_at", "2023-07-11 22:24:54.476831"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:24:54.496701"], ["updated_at", "2023-07-11 22:24:54.496701"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:24:54.513671"], ["updated_at", "2023-07-11 22:24:54.513671"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:24:58.266625"], ["updated_at", "2023-07-11 22:24:58.266625"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:24:58.269311"], ["updated_at", "2023-07-11 22:24:58.269311"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:24:58.269844"], ["updated_at", "2023-07-11 22:24:58.269844"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:24:58.270101"], ["updated_at", "2023-07-11 22:24:58.270101"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo2"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:24:58.274285"], ["updated_at", "2023-07-11 22:24:58.274285"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:24:58.274690"], ["updated_at", "2023-07-11 22:24:58.274690"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:24:58.275111"], ["updated_at", "2023-07-11 22:24:58.275111"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:24:58.275364"], ["updated_at", "2023-07-11 22:24:58.275364"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo2"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:24:58.277178"], ["updated_at", "2023-07-11 22:24:58.277178"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:24:58.277519"], ["updated_at", "2023-07-11 22:24:58.277519"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:24:58.277918"], ["updated_at", "2023-07-11 22:24:58.277918"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:24:58.278160"], ["updated_at", "2023-07-11 22:24:58.278160"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:24:58.278978"], ["updated_at", "2023-07-11 22:24:58.278978"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo2"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:24:58.283237"], ["updated_at", "2023-07-11 22:24:58.283237"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:24:58.284158"], ["updated_at", "2023-07-11 22:24:58.284158"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:24:58.291970"], ["updated_at", "2023-07-11 22:24:58.291970"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:24:58.294060"], ["updated_at", "2023-07-11 22:24:58.294060"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:24:58.296166"], ["updated_at", "2023-07-11 22:24:58.296166"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:24:58.297766"], ["updated_at", "2023-07-11 22:24:58.297766"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:25:28.673574"], ["updated_at", "2023-07-11 22:25:28.673574"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:25:28.676070"], ["updated_at", "2023-07-11 22:25:28.676070"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:25:28.676599"], ["updated_at", "2023-07-11 22:25:28.676599"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:25:28.676855"], ["updated_at", "2023-07-11 22:25:28.676855"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo2"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:25:28.680624"], ["updated_at", "2023-07-11 22:25:28.680624"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:25:28.681023"], ["updated_at", "2023-07-11 22:25:28.681023"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:25:28.681439"], ["updated_at", "2023-07-11 22:25:28.681439"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:25:28.681681"], ["updated_at", "2023-07-11 22:25:28.681681"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo2"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:25:28.683328"], ["updated_at", "2023-07-11 22:25:28.683328"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:25:28.683666"], ["updated_at", "2023-07-11 22:25:28.683666"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:25:28.684062"], ["updated_at", "2023-07-11 22:25:28.684062"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:25:28.684297"], ["updated_at", "2023-07-11 22:25:28.684297"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:25:28.685134"], ["updated_at", "2023-07-11 22:25:28.685134"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo2"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:25:28.695151"], ["updated_at", "2023-07-11 22:25:28.695151"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:25:28.696317"], ["updated_at", "2023-07-11 22:25:28.696317"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:25:28.698521"], ["updated_at", "2023-07-11 22:25:28.698521"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:25:28.700592"], ["updated_at", "2023-07-11 22:25:28.700592"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:25:28.702718"], ["updated_at", "2023-07-11 22:25:28.702718"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:25:28.704395"], ["updated_at", "2023-07-11 22:25:28.704395"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:31:03.193303"], ["updated_at", "2023-07-11 22:31:03.193303"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:31:03.196214"], ["updated_at", "2023-07-11 22:31:03.196214"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:31:03.196749"], ["updated_at", "2023-07-11 22:31:03.196749"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:31:03.197007"], ["updated_at", "2023-07-11 22:31:03.197007"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:31:03.201258"], ["updated_at", "2023-07-11 22:31:03.201258"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:31:03.201670"], ["updated_at", "2023-07-11 22:31:03.201670"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:31:03.202095"], ["updated_at", "2023-07-11 22:31:03.202095"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:31:03.202346"], ["updated_at", "2023-07-11 22:31:03.202346"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:31:03.204164"], ["updated_at", "2023-07-11 22:31:03.204164"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:31:03.204514"], ["updated_at", "2023-07-11 22:31:03.204514"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:31:03.204918"], ["updated_at", "2023-07-11 22:31:03.204918"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:31:03.205158"], ["updated_at", "2023-07-11 22:31:03.205158"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:31:03.205993"], ["updated_at", "2023-07-11 22:31:03.205993"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.3ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-11 22:31:03.207685"], ["supplier_id", 1], ["supplier_reference", "38835832-6f1c-400c-aa68-a0e6923e1102"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-11 22:31:03.208468"], ["supplier_id", 1], ["supplier_reference", "58ba835d-fdfb-4d47-bf16-000d23284fac"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:31:03.218928"], ["updated_at", "2023-07-11 22:31:03.218928"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:31:03.220136"], ["updated_at", "2023-07-11 22:31:03.220136"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:31:03.222252"], ["updated_at", "2023-07-11 22:31:03.222252"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:31:03.224094"], ["updated_at", "2023-07-11 22:31:03.224094"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:31:03.226343"], ["updated_at", "2023-07-11 22:31:03.226343"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:31:03.228554"], ["updated_at", "2023-07-11 22:31:03.228554"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:38:15.039323"], ["updated_at", "2023-07-11 22:38:15.039323"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:38:15.042021"], ["updated_at", "2023-07-11 22:38:15.042021"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:38:15.042546"], ["updated_at", "2023-07-11 22:38:15.042546"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:38:15.042798"], ["updated_at", "2023-07-11 22:38:15.042798"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:38:15.046989"], ["updated_at", "2023-07-11 22:38:15.046989"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:38:15.047379"], ["updated_at", "2023-07-11 22:38:15.047379"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:38:15.047811"], ["updated_at", "2023-07-11 22:38:15.047811"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:38:15.048063"], ["updated_at", "2023-07-11 22:38:15.048063"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:38:15.049903"], ["updated_at", "2023-07-11 22:38:15.049903"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:38:15.050245"], ["updated_at", "2023-07-11 22:38:15.050245"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:38:15.050641"], ["updated_at", "2023-07-11 22:38:15.050641"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:38:15.050892"], ["updated_at", "2023-07-11 22:38:15.050892"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:38:15.051931"], ["updated_at", "2023-07-11 22:38:15.051931"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-11 22:38:15.054035"], ["supplier_id", 1], ["supplier_reference", "d40788d0-766a-4597-8361-a4c4565c0d66"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-11 22:38:15.054596"], ["supplier_id", 1], ["supplier_reference", "1c1e5176-7a11-4f57-8804-3a79f980b959"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:38:15.059346"], ["updated_at", "2023-07-11 22:38:15.059346"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:38:15.066798"], ["updated_at", "2023-07-11 22:38:15.066798"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:38:15.069165"], ["updated_at", "2023-07-11 22:38:15.069165"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:38:15.071125"], ["updated_at", "2023-07-11 22:38:15.071125"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:38:15.073652"], ["updated_at", "2023-07-11 22:38:15.073652"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:38:15.075697"], ["updated_at", "2023-07-11 22:38:15.075697"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:40:02.434892"], ["updated_at", "2023-07-11 22:40:02.434892"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:40:02.437861"], ["updated_at", "2023-07-11 22:40:02.437861"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:40:02.438434"], ["updated_at", "2023-07-11 22:40:02.438434"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:40:02.438698"], ["updated_at", "2023-07-11 22:40:02.438698"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:40:02.443177"], ["updated_at", "2023-07-11 22:40:02.443177"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:40:02.443608"], ["updated_at", "2023-07-11 22:40:02.443608"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:40:02.444053"], ["updated_at", "2023-07-11 22:40:02.444053"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:40:02.444310"], ["updated_at", "2023-07-11 22:40:02.444310"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:40:02.446239"], ["updated_at", "2023-07-11 22:40:02.446239"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:40:02.446597"], ["updated_at", "2023-07-11 22:40:02.446597"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:40:02.447021"], ["updated_at", "2023-07-11 22:40:02.447021"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:40:02.447278"], ["updated_at", "2023-07-11 22:40:02.447278"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:40:02.448150"], ["updated_at", "2023-07-11 22:40:02.448150"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:40:46.663851"], ["updated_at", "2023-07-11 22:40:46.663851"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:40:46.672904"], ["updated_at", "2023-07-11 22:40:46.672904"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:40:46.691054"], ["updated_at", "2023-07-11 22:40:46.691054"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:40:46.707173"], ["updated_at", "2023-07-11 22:40:46.707173"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:40:46.726494"], ["updated_at", "2023-07-11 22:40:46.726494"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:40:46.743526"], ["updated_at", "2023-07-11 22:40:46.743526"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Load (0.5ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "suppliers"[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mSupplier Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "suppliers"[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:43:42.906734"], ["updated_at", "2023-07-11 22:43:42.906734"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:43:42.909489"], ["updated_at", "2023-07-11 22:43:42.909489"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:43:42.910017"], ["updated_at", "2023-07-11 22:43:42.910017"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:43:42.910278"], ["updated_at", "2023-07-11 22:43:42.910278"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "suppliers"[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:44:32.239923"], ["updated_at", "2023-07-11 22:44:32.239923"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:44:32.248517"], ["updated_at", "2023-07-11 22:44:32.248517"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:44:32.255009"], ["updated_at", "2023-07-11 22:44:32.255009"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:44:32.258699"], ["updated_at", "2023-07-11 22:44:32.258699"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:44:32.278616"], ["updated_at", "2023-07-11 22:44:32.278616"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:44:32.281798"], ["updated_at", "2023-07-11 22:44:32.281798"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:44:32.287413"], ["updated_at", "2023-07-11 22:44:32.287413"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:44:32.290787"], ["updated_at", "2023-07-11 22:44:32.290787"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:44:32.299143"], ["updated_at", "2023-07-11 22:44:32.299143"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.1ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.1ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-11 22:44:32.310355"], ["supplier_id", 1], ["supplier_reference", "1efffd8b-776e-4dd2-85d5-5c95d2389515"], ["id", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.1ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-11 22:44:32.316870"], ["supplier_id", 1], ["supplier_reference", "10cf0552-66f8-410f-b3e4-70fbef7740e4"], ["id", 2]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.1ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:44:32.348622"], ["updated_at", "2023-07-11 22:44:32.348622"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:44:32.356205"], ["updated_at", "2023-07-11 22:44:32.356205"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:44:32.376281"], ["updated_at", "2023-07-11 22:44:32.376281"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:44:32.391754"], ["updated_at", "2023-07-11 22:44:32.391754"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:44:32.409569"], ["updated_at", "2023-07-11 22:44:32.409569"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:44:32.425523"], ["updated_at", "2023-07-11 22:44:32.425523"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:44:37.618191"], ["updated_at", "2023-07-11 22:44:37.618191"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:44:37.620873"], ["updated_at", "2023-07-11 22:44:37.620873"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:44:37.621408"], ["updated_at", "2023-07-11 22:44:37.621408"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:44:37.621669"], ["updated_at", "2023-07-11 22:44:37.621669"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "suppliers"[0m
  [1m[36mSupplier Load (0.4ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:46:31.429792"], ["updated_at", "2023-07-11 22:46:31.429792"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:46:31.435175"], ["updated_at", "2023-07-11 22:46:31.435175"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:46:31.444158"], ["updated_at", "2023-07-11 22:46:31.444158"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:46:31.448548"], ["updated_at", "2023-07-11 22:46:31.448548"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:46:31.467163"], ["updated_at", "2023-07-11 22:46:31.467163"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:46:31.471325"], ["updated_at", "2023-07-11 22:46:31.471325"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:46:31.478176"], ["updated_at", "2023-07-11 22:46:31.478176"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:46:31.482041"], ["updated_at", "2023-07-11 22:46:31.482041"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:46:31.494519"], ["updated_at", "2023-07-11 22:46:31.494519"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.2ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:46:31.538300"], ["updated_at", "2023-07-11 22:46:31.538300"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:46:31.547860"], ["updated_at", "2023-07-11 22:46:31.547860"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:46:31.573442"], ["updated_at", "2023-07-11 22:46:31.573442"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:46:31.595893"], ["updated_at", "2023-07-11 22:46:31.595893"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:46:31.619591"], ["updated_at", "2023-07-11 22:46:31.619591"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:46:31.640991"], ["updated_at", "2023-07-11 22:46:31.640991"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:50:17.457535"], ["updated_at", "2023-07-11 22:50:17.457535"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:50:17.460628"], ["updated_at", "2023-07-11 22:50:17.460628"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:50:17.461256"], ["updated_at", "2023-07-11 22:50:17.461256"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:50:17.461532"], ["updated_at", "2023-07-11 22:50:17.461532"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:50:17.463825"], ["updated_at", "2023-07-11 22:50:17.463825"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:50:17.464273"], ["updated_at", "2023-07-11 22:50:17.464273"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:50:17.464734"], ["updated_at", "2023-07-11 22:50:17.464734"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:50:17.465006"], ["updated_at", "2023-07-11 22:50:17.465006"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Fancy Headphones"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Fancy Headphones"], ["created_at", "2023-07-11 22:50:17.467634"], ["updated_at", "2023-07-11 22:50:17.467634"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Orlando Bloom"], ["product_id", 1], ["created_at", "2023-07-11 22:50:17.468198"], ["updated_at", "2023-07-11 22:50:17.468198"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Cool Smartphone"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Cool Smartphone"], ["created_at", "2023-07-11 22:50:17.468657"], ["updated_at", "2023-07-11 22:50:17.468657"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Dua Lipa"], ["product_id", 2], ["created_at", "2023-07-11 22:50:17.468913"], ["updated_at", "2023-07-11 22:50:17.468913"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:50:17.470056"], ["updated_at", "2023-07-11 22:50:17.470056"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-11 22:50:17.472242"], ["supplier_id", 1], ["supplier_reference", "25b0fbc6-abed-4bd3-a8d9-2ab4d624b6dd"], ["id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-11 22:50:17.472834"], ["supplier_id", 1], ["supplier_reference", "5ecbd11f-a2b5-4508-ad43-84be1d38828c"], ["id", 2]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Pluck (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference" FROM "orders"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:50:17.477420"], ["updated_at", "2023-07-11 22:50:17.477420"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:50:17.484993"], ["updated_at", "2023-07-11 22:50:17.484993"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-11 22:50:17.487335"], ["updated_at", "2023-07-11 22:50:17.487335"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:50:17.489291"], ["updated_at", "2023-07-11 22:50:17.489291"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:50:17.492109"], ["updated_at", "2023-07-11 22:50:17.492109"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-11 22:50:17.493970"], ["updated_at", "2023-07-11 22:50:17.493970"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders"[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "customer_name" varchar NOT NULL, "product_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "supplier_id" integer, "supplier_reference" varchar, "state" varchar DEFAULT 'pending')[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_orders_on_product_id" ON "orders" ("product_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_orders_on_supplier_id" ON "orders" ("supplier_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_products_on_name" ON "products" ("name")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "suppliers"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "suppliers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_suppliers_on_name" ON "suppliers" ("name")[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorders" ("id" integer NOT NULL PRIMARY KEY, "customer_name" varchar NOT NULL, "product_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "supplier_id" integer DEFAULT NULL, "supplier_reference" varchar DEFAULT NULL, "state" varchar DEFAULT 'pending')[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorders_on_supplier_id" ON "aorders" ("supplier_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "tindex_aorders_on_product_id" ON "aorders" ("product_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aorders" ("id","customer_name","product_id","created_at","updated_at","supplier_id","supplier_reference","state")
                     SELECT "id","customer_name","product_id","created_at","updated_at","supplier_id","supplier_reference","state" FROM "orders"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer NOT NULL PRIMARY KEY, "customer_name" varchar NOT NULL, "product_id" integer NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, "supplier_id" integer DEFAULT NULL, "supplier_reference" varchar DEFAULT NULL, "state" varchar DEFAULT 'pending', CONSTRAINT "fk_rails_dfb33b2de0"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_orders_on_product_id" ON "orders" ("product_id")[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_orders_on_supplier_id" ON "orders" ("supplier_id")[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("id","customer_name","product_id","created_at","updated_at","supplier_id","supplier_reference","state")
                     SELECT "id","customer_name","product_id","created_at","updated_at","supplier_id","supplier_reference","state" FROM "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20210513172112)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20210513102325),
(20210513103623),
(20210513141644),
(20210513143700);

[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-07-12 11:48:24.953484"], ["updated_at", "2023-07-12 11:48:24.953484"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "schema_sha1"], ["value", "cdae3101ee93f0a7d2b26c6676a195333dcdea10"], ["created_at", "2023-07-12 11:48:24.954953"], ["updated_at", "2023-07-12 11:48:24.954953"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:48:24.980086"], ["updated_at", "2023-07-12 11:48:24.980086"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:48:24.992746"], ["updated_at", "2023-07-12 11:48:24.992746"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:48:24.993691"], ["updated_at", "2023-07-12 11:48:24.993691"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:48:24.994050"], ["updated_at", "2023-07-12 11:48:24.994050"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:48:24.994544"], ["updated_at", "2023-07-12 11:48:24.994544"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:48:24.994806"], ["updated_at", "2023-07-12 11:48:24.994806"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
[31mCould not find a supplier with stock to fulfill order for Lionel Messi[0m
Fulfilling to fulfill order for Cristiano Ronaldo
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
[31mCould not find a supplier with stock to fulfill order for Cristiano Ronaldo[0m
Fulfilling to fulfill order for Kylian Mbappe
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
[31mCould not find a supplier with stock to fulfill order for Kylian Mbappe[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:48:24.998913"], ["updated_at", "2023-07-12 11:48:24.998913"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:48:24.999359"], ["updated_at", "2023-07-12 11:48:24.999359"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:48:24.999868"], ["updated_at", "2023-07-12 11:48:24.999868"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:48:25.000142"], ["updated_at", "2023-07-12 11:48:25.000142"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:48:25.000576"], ["updated_at", "2023-07-12 11:48:25.000576"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:48:25.000834"], ["updated_at", "2023-07-12 11:48:25.000834"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:48:25.002665"], ["updated_at", "2023-07-12 11:48:25.002665"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 11:48:25.003131"], ["updated_at", "2023-07-12 11:48:25.003131"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Lionel Messi[0m
Fulfilling to fulfill order for Cristiano Ronaldo
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Cristiano Ronaldo[0m
Fulfilling to fulfill order for Kylian Mbappe
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Kylian Mbappe[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:48:25.017798"], ["updated_at", "2023-07-12 11:48:25.017798"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:48:25.018302"], ["updated_at", "2023-07-12 11:48:25.018302"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:48:25.018815"], ["updated_at", "2023-07-12 11:48:25.018815"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:48:25.019277"], ["updated_at", "2023-07-12 11:48:25.019277"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:48:25.019826"], ["updated_at", "2023-07-12 11:48:25.019826"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:48:25.020081"], ["updated_at", "2023-07-12 11:48:25.020081"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:48:25.020525"], ["updated_at", "2023-07-12 11:48:25.020525"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 11:48:25.020966"], ["updated_at", "2023-07-12 11:48:25.020966"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference", "orders"."state" FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ?, "state" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-12 11:48:25.022558"], ["supplier_id", 1], ["supplier_reference", "77ee3c9a-7db5-4c95-b418-6aa607706079"], ["state", "completed"], ["id", 1]]
Fulfilling to fulfill order for Cristiano Ronaldo
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ?, "state" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-12 11:48:25.023538"], ["supplier_id", 2], ["supplier_reference", "4514663b-3786-4d57-87de-c2994cdffcf7"], ["state", "completed"], ["id", 2]]
Fulfilling to fulfill order for Kylian Mbappe
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Kylian Mbappe[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference", "orders"."state" FROM "orders"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:48:25.025057"], ["updated_at", "2023-07-12 11:48:25.025057"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:48:25.025446"], ["updated_at", "2023-07-12 11:48:25.025446"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:48:25.025910"], ["updated_at", "2023-07-12 11:48:25.025910"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:48:25.026183"], ["updated_at", "2023-07-12 11:48:25.026183"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:48:25.026596"], ["updated_at", "2023-07-12 11:48:25.026596"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:48:25.026829"], ["updated_at", "2023-07-12 11:48:25.026829"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:48:25.027234"], ["updated_at", "2023-07-12 11:48:25.027234"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 11:48:25.027598"], ["updated_at", "2023-07-12 11:48:25.027598"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "completed"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ?, "state" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-12 11:48:25.028833"], ["supplier_id", 1], ["supplier_reference", "a490fab2-efda-46ca-81d1-8c66de794940"], ["state", "completed"], ["id", 1]]
Fulfilling to fulfill order for Cristiano Ronaldo
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ?, "state" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-12 11:48:25.029995"], ["supplier_id", 2], ["supplier_reference", "b3f8c51a-4875-4e1b-b2b3-9e299f8a45f7"], ["state", "completed"], ["id", 2]]
Fulfilling to fulfill order for Kylian Mbappe
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Kylian Mbappe[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "completed"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 11:48:25.039068"], ["updated_at", "2023-07-12 11:48:25.039068"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 11:48:25.040202"], ["updated_at", "2023-07-12 11:48:25.040202"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 11:48:25.042604"], ["updated_at", "2023-07-12 11:48:25.042604"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:48:25.047850"], ["updated_at", "2023-07-12 11:48:25.047850"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:48:25.050174"], ["updated_at", "2023-07-12 11:48:25.050174"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:48:25.051887"], ["updated_at", "2023-07-12 11:48:25.051887"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:48:52.320002"], ["updated_at", "2023-07-12 11:48:52.320002"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:48:52.324217"], ["updated_at", "2023-07-12 11:48:52.324217"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:48:52.325066"], ["updated_at", "2023-07-12 11:48:52.325066"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:48:52.325356"], ["updated_at", "2023-07-12 11:48:52.325356"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:48:52.325779"], ["updated_at", "2023-07-12 11:48:52.325779"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:48:52.326033"], ["updated_at", "2023-07-12 11:48:52.326033"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
[31mCould not find a supplier with stock to fulfill order for Lionel Messi[0m
Fulfilling to fulfill order for Cristiano Ronaldo
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
[31mCould not find a supplier with stock to fulfill order for Cristiano Ronaldo[0m
Fulfilling to fulfill order for Kylian Mbappe
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
[31mCould not find a supplier with stock to fulfill order for Kylian Mbappe[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:48:52.329628"], ["updated_at", "2023-07-12 11:48:52.329628"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:48:52.330078"], ["updated_at", "2023-07-12 11:48:52.330078"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:48:52.330612"], ["updated_at", "2023-07-12 11:48:52.330612"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:48:52.330903"], ["updated_at", "2023-07-12 11:48:52.330903"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:48:52.331456"], ["updated_at", "2023-07-12 11:48:52.331456"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:48:52.331817"], ["updated_at", "2023-07-12 11:48:52.331817"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:48:52.334060"], ["updated_at", "2023-07-12 11:48:52.334060"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 11:48:52.334766"], ["updated_at", "2023-07-12 11:48:52.334766"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.7ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:50:45.662903"], ["updated_at", "2023-07-12 11:50:45.662903"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:50:45.669589"], ["updated_at", "2023-07-12 11:50:45.669589"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:50:45.678975"], ["updated_at", "2023-07-12 11:50:45.678975"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:50:45.684140"], ["updated_at", "2023-07-12 11:50:45.684140"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:50:45.691441"], ["updated_at", "2023-07-12 11:50:45.691441"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:50:45.695606"], ["updated_at", "2023-07-12 11:50:45.695606"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:50:45.702306"], ["updated_at", "2023-07-12 11:50:45.702306"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 11:50:45.707621"], ["updated_at", "2023-07-12 11:50:45.707621"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference", "orders"."state" FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:50:45.727964"], ["updated_at", "2023-07-12 11:50:45.727964"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:50:45.732421"], ["updated_at", "2023-07-12 11:50:45.732421"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:50:45.737797"], ["updated_at", "2023-07-12 11:50:45.737797"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:50:45.742394"], ["updated_at", "2023-07-12 11:50:45.742394"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:50:45.748956"], ["updated_at", "2023-07-12 11:50:45.748956"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:50:45.753006"], ["updated_at", "2023-07-12 11:50:45.753006"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:50:45.759345"], ["updated_at", "2023-07-12 11:50:45.759345"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 11:50:45.764747"], ["updated_at", "2023-07-12 11:50:45.764747"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "completed"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 11:50:45.816155"], ["updated_at", "2023-07-12 11:50:45.816155"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 11:50:45.825157"], ["updated_at", "2023-07-12 11:50:45.825157"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 11:50:45.849210"], ["updated_at", "2023-07-12 11:50:45.849210"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:50:45.870722"], ["updated_at", "2023-07-12 11:50:45.870722"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:50:45.896212"], ["updated_at", "2023-07-12 11:50:45.896212"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.4ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:50:45.918590"], ["updated_at", "2023-07-12 11:50:45.918590"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:51:16.186087"], ["updated_at", "2023-07-12 11:51:16.186087"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:51:16.189280"], ["updated_at", "2023-07-12 11:51:16.189280"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:51:16.189881"], ["updated_at", "2023-07-12 11:51:16.189881"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:51:16.190138"], ["updated_at", "2023-07-12 11:51:16.190138"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:51:16.190532"], ["updated_at", "2023-07-12 11:51:16.190532"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:51:16.190766"], ["updated_at", "2023-07-12 11:51:16.190766"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:51:16.193109"], ["updated_at", "2023-07-12 11:51:16.193109"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:51:16.193478"], ["updated_at", "2023-07-12 11:51:16.193478"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:51:16.193909"], ["updated_at", "2023-07-12 11:51:16.193909"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:51:16.194138"], ["updated_at", "2023-07-12 11:51:16.194138"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:51:16.194517"], ["updated_at", "2023-07-12 11:51:16.194517"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:51:16.194748"], ["updated_at", "2023-07-12 11:51:16.194748"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:51:16.196269"], ["updated_at", "2023-07-12 11:51:16.196269"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 11:51:16.196693"], ["updated_at", "2023-07-12 11:51:16.196693"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:51:16.201747"], ["updated_at", "2023-07-12 11:51:16.201747"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:51:16.202126"], ["updated_at", "2023-07-12 11:51:16.202126"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:51:16.202555"], ["updated_at", "2023-07-12 11:51:16.202555"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:51:16.202798"], ["updated_at", "2023-07-12 11:51:16.202798"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:51:16.203178"], ["updated_at", "2023-07-12 11:51:16.203178"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:51:16.203417"], ["updated_at", "2023-07-12 11:51:16.203417"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:51:16.203806"], ["updated_at", "2023-07-12 11:51:16.203806"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 11:51:16.204162"], ["updated_at", "2023-07-12 11:51:16.204162"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference", "orders"."state" FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:51:16.205859"], ["updated_at", "2023-07-12 11:51:16.205859"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:51:16.206198"], ["updated_at", "2023-07-12 11:51:16.206198"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:51:16.206622"], ["updated_at", "2023-07-12 11:51:16.206622"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:51:16.206855"], ["updated_at", "2023-07-12 11:51:16.206855"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:51:16.207240"], ["updated_at", "2023-07-12 11:51:16.207240"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:51:16.207467"], ["updated_at", "2023-07-12 11:51:16.207467"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:51:16.207864"], ["updated_at", "2023-07-12 11:51:16.207864"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 11:51:16.208231"], ["updated_at", "2023-07-12 11:51:16.208231"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "completed"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 11:51:16.213271"], ["updated_at", "2023-07-12 11:51:16.213271"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 11:51:16.214173"], ["updated_at", "2023-07-12 11:51:16.214173"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 11:51:16.216192"], ["updated_at", "2023-07-12 11:51:16.216192"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:51:16.217976"], ["updated_at", "2023-07-12 11:51:16.217976"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:51:16.220780"], ["updated_at", "2023-07-12 11:51:16.220780"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 11:51:16.222993"], ["updated_at", "2023-07-12 11:51:16.222993"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 11:51:58.081548"], ["updated_at", "2023-07-12 11:51:58.081548"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 11:51:58.084812"], ["updated_at", "2023-07-12 11:51:58.084812"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 11:51:58.085377"], ["updated_at", "2023-07-12 11:51:58.085377"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 11:51:58.085640"], ["updated_at", "2023-07-12 11:51:58.085640"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 11:51:58.086037"], ["updated_at", "2023-07-12 11:51:58.086037"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 11:51:58.086265"], ["updated_at", "2023-07-12 11:51:58.086265"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 12:48:10.915741"], ["updated_at", "2023-07-12 12:48:10.915741"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 12:48:10.922721"], ["updated_at", "2023-07-12 12:48:10.922721"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 12:48:10.930475"], ["updated_at", "2023-07-12 12:48:10.930475"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 12:48:10.935321"], ["updated_at", "2023-07-12 12:48:10.935321"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 12:48:10.941258"], ["updated_at", "2023-07-12 12:48:10.941258"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 12:48:10.944985"], ["updated_at", "2023-07-12 12:48:10.944985"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 12:48:10.959366"], ["updated_at", "2023-07-12 12:48:10.959366"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 12:48:10.965384"], ["updated_at", "2023-07-12 12:48:10.965384"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.9ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 12:48:11.008771"], ["updated_at", "2023-07-12 12:48:11.008771"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 12:48:11.013072"], ["updated_at", "2023-07-12 12:48:11.013072"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 12:48:11.019776"], ["updated_at", "2023-07-12 12:48:11.019776"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 12:48:11.023606"], ["updated_at", "2023-07-12 12:48:11.023606"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 12:48:11.029298"], ["updated_at", "2023-07-12 12:48:11.029298"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 12:48:11.033052"], ["updated_at", "2023-07-12 12:48:11.033052"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 12:48:11.039457"], ["updated_at", "2023-07-12 12:48:11.039457"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 12:48:11.045546"], ["updated_at", "2023-07-12 12:48:11.045546"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference", "orders"."state" FROM "orders"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 12:48:11.068543"], ["updated_at", "2023-07-12 12:48:11.068543"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 12:48:11.072210"], ["updated_at", "2023-07-12 12:48:11.072210"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 12:48:11.078485"], ["updated_at", "2023-07-12 12:48:11.078485"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 12:48:11.081628"], ["updated_at", "2023-07-12 12:48:11.081628"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 12:48:11.087267"], ["updated_at", "2023-07-12 12:48:11.087267"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 12:48:11.090847"], ["updated_at", "2023-07-12 12:48:11.090847"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 12:48:11.096662"], ["updated_at", "2023-07-12 12:48:11.096662"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 12:48:11.102053"], ["updated_at", "2023-07-12 12:48:11.102053"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "completed"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 12:48:11.158472"], ["updated_at", "2023-07-12 12:48:11.158472"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 12:48:11.168448"], ["updated_at", "2023-07-12 12:48:11.168448"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 12:48:11.194061"], ["updated_at", "2023-07-12 12:48:11.194061"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 12:48:11.216528"], ["updated_at", "2023-07-12 12:48:11.216528"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 12:48:11.240736"], ["updated_at", "2023-07-12 12:48:11.240736"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 12:48:11.262946"], ["updated_at", "2023-07-12 12:48:11.262946"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 16:23:38.241614"], ["updated_at", "2023-07-12 16:23:38.241614"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 16:23:38.244982"], ["updated_at", "2023-07-12 16:23:38.244982"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 16:23:38.245563"], ["updated_at", "2023-07-12 16:23:38.245563"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 16:23:38.245821"], ["updated_at", "2023-07-12 16:23:38.245821"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 16:23:38.246197"], ["updated_at", "2023-07-12 16:23:38.246197"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 16:23:38.246429"], ["updated_at", "2023-07-12 16:23:38.246429"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
[31mCould not find a supplier with stock to fulfill order for Lionel Messi[0m
Fulfilling to fulfill order for Cristiano Ronaldo
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
[31mCould not find a supplier with stock to fulfill order for Cristiano Ronaldo[0m
Fulfilling to fulfill order for Kylian Mbappe
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
[31mCould not find a supplier with stock to fulfill order for Kylian Mbappe[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 16:23:38.248952"], ["updated_at", "2023-07-12 16:23:38.248952"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 16:23:38.249320"], ["updated_at", "2023-07-12 16:23:38.249320"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 16:23:38.249762"], ["updated_at", "2023-07-12 16:23:38.249762"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 16:23:38.250012"], ["updated_at", "2023-07-12 16:23:38.250012"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 16:23:38.250401"], ["updated_at", "2023-07-12 16:23:38.250401"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 16:23:38.250636"], ["updated_at", "2023-07-12 16:23:38.250636"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:23:38.252182"], ["updated_at", "2023-07-12 16:23:38.252182"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 16:23:38.252598"], ["updated_at", "2023-07-12 16:23:38.252598"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Lionel Messi[0m
Fulfilling to fulfill order for Cristiano Ronaldo
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Cristiano Ronaldo[0m
Fulfilling to fulfill order for Kylian Mbappe
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Kylian Mbappe[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 16:23:38.259475"], ["updated_at", "2023-07-12 16:23:38.259475"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 16:23:38.259916"], ["updated_at", "2023-07-12 16:23:38.259916"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 16:23:38.260390"], ["updated_at", "2023-07-12 16:23:38.260390"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 16:23:38.260658"], ["updated_at", "2023-07-12 16:23:38.260658"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 16:23:38.264869"], ["updated_at", "2023-07-12 16:23:38.264869"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 16:23:38.265180"], ["updated_at", "2023-07-12 16:23:38.265180"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:23:38.265647"], ["updated_at", "2023-07-12 16:23:38.265647"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 16:23:38.266035"], ["updated_at", "2023-07-12 16:23:38.266035"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference", "orders"."state" FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mOrder Update (0.1ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ?, "state" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-12 16:23:38.267511"], ["supplier_id", 1], ["supplier_reference", "0f1e84dd-e764-46af-b071-af89479bffed"], ["state", "completed"], ["id", 1]]
Fulfilling to fulfill order for Cristiano Ronaldo
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ?, "state" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-12 16:23:38.268975"], ["supplier_id", 2], ["supplier_reference", "8ca1257a-900b-4fbb-8105-40d45273722f"], ["state", "completed"], ["id", 2]]
Fulfilling to fulfill order for Kylian Mbappe
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Kylian Mbappe[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference", "orders"."state" FROM "orders"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 16:23:38.270765"], ["updated_at", "2023-07-12 16:23:38.270765"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 16:23:38.271175"], ["updated_at", "2023-07-12 16:23:38.271175"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 16:23:38.271625"], ["updated_at", "2023-07-12 16:23:38.271625"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 16:23:38.271881"], ["updated_at", "2023-07-12 16:23:38.271881"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 16:23:38.272281"], ["updated_at", "2023-07-12 16:23:38.272281"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 16:23:38.272533"], ["updated_at", "2023-07-12 16:23:38.272533"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:23:38.272947"], ["updated_at", "2023-07-12 16:23:38.272947"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 16:23:38.273329"], ["updated_at", "2023-07-12 16:23:38.273329"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "completed"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ?, "state" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-12 16:23:38.274827"], ["supplier_id", 1], ["supplier_reference", "52c2a44d-44d7-4e77-bc92-dc2607ec96f9"], ["state", "completed"], ["id", 1]]
Fulfilling to fulfill order for Cristiano Ronaldo
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mOrder Update (0.0ms)[0m  [1m[33mUPDATE "orders" SET "updated_at" = ?, "supplier_id" = ?, "supplier_reference" = ?, "state" = ? WHERE "orders"."id" = ?[0m  [["updated_at", "2023-07-12 16:23:38.276154"], ["supplier_id", 2], ["supplier_reference", "1a51a465-5352-43d8-ac61-fba88f93b345"], ["state", "completed"], ["id", 2]]
Fulfilling to fulfill order for Kylian Mbappe
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Kylian Mbappe[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "completed"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 16:23:38.283424"], ["updated_at", "2023-07-12 16:23:38.283424"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 16:23:38.284513"], ["updated_at", "2023-07-12 16:23:38.284513"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 16:23:38.286653"], ["updated_at", "2023-07-12 16:23:38.286653"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:23:38.288663"], ["updated_at", "2023-07-12 16:23:38.288663"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:23:38.290817"], ["updated_at", "2023-07-12 16:23:38.290817"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:23:38.292521"], ["updated_at", "2023-07-12 16:23:38.292521"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 16:24:01.669183"], ["updated_at", "2023-07-12 16:24:01.669183"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 16:24:01.672524"], ["updated_at", "2023-07-12 16:24:01.672524"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 16:24:01.673099"], ["updated_at", "2023-07-12 16:24:01.673099"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 16:24:01.673364"], ["updated_at", "2023-07-12 16:24:01.673364"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 16:24:01.673758"], ["updated_at", "2023-07-12 16:24:01.673758"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 16:24:01.673997"], ["updated_at", "2023-07-12 16:24:01.673997"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (6.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 16:26:10.710944"], ["updated_at", "2023-07-12 16:26:10.710944"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 16:26:10.715871"], ["updated_at", "2023-07-12 16:26:10.715871"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 16:26:10.725441"], ["updated_at", "2023-07-12 16:26:10.725441"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 16:26:10.729922"], ["updated_at", "2023-07-12 16:26:10.729922"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 16:26:10.736447"], ["updated_at", "2023-07-12 16:26:10.736447"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 16:26:10.741353"], ["updated_at", "2023-07-12 16:26:10.741353"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:26:10.756082"], ["updated_at", "2023-07-12 16:26:10.756082"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 16:26:10.761314"], ["updated_at", "2023-07-12 16:26:10.761314"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 16:26:10.797005"], ["updated_at", "2023-07-12 16:26:10.797005"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 16:26:10.800859"], ["updated_at", "2023-07-12 16:26:10.800859"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 16:26:10.806757"], ["updated_at", "2023-07-12 16:26:10.806757"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 16:26:10.810585"], ["updated_at", "2023-07-12 16:26:10.810585"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 16:26:10.816119"], ["updated_at", "2023-07-12 16:26:10.816119"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 16:26:10.819248"], ["updated_at", "2023-07-12 16:26:10.819248"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:26:10.825184"], ["updated_at", "2023-07-12 16:26:10.825184"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 16:26:10.830626"], ["updated_at", "2023-07-12 16:26:10.830626"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference", "orders"."state" FROM "orders"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 16:26:10.852285"], ["updated_at", "2023-07-12 16:26:10.852285"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 16:26:10.855762"], ["updated_at", "2023-07-12 16:26:10.855762"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 16:26:10.861401"], ["updated_at", "2023-07-12 16:26:10.861401"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 16:26:10.865225"], ["updated_at", "2023-07-12 16:26:10.865225"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 16:26:10.870801"], ["updated_at", "2023-07-12 16:26:10.870801"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 16:26:10.873811"], ["updated_at", "2023-07-12 16:26:10.873811"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:26:10.879356"], ["updated_at", "2023-07-12 16:26:10.879356"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 16:26:10.885357"], ["updated_at", "2023-07-12 16:26:10.885357"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "completed"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 16:26:10.938580"], ["updated_at", "2023-07-12 16:26:10.938580"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 16:26:10.948301"], ["updated_at", "2023-07-12 16:26:10.948301"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-12 16:26:10.972912"], ["updated_at", "2023-07-12 16:26:10.972912"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:26:10.995549"], ["updated_at", "2023-07-12 16:26:10.995549"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:26:11.019502"], ["updated_at", "2023-07-12 16:26:11.019502"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:26:11.039483"], ["updated_at", "2023-07-12 16:26:11.039483"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "schema_sha1"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 16:26:14.554649"], ["updated_at", "2023-07-12 16:26:14.554649"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 16:26:14.557981"], ["updated_at", "2023-07-12 16:26:14.557981"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 16:26:14.558882"], ["updated_at", "2023-07-12 16:26:14.558882"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 16:26:14.559187"], ["updated_at", "2023-07-12 16:26:14.559187"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 16:26:14.559637"], ["updated_at", "2023-07-12 16:26:14.559637"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 16:26:14.559908"], ["updated_at", "2023-07-12 16:26:14.559908"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
[31mCould not find a supplier with stock to fulfill order for Lionel Messi[0m
Fulfilling to fulfill order for Cristiano Ronaldo
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
[31mCould not find a supplier with stock to fulfill order for Cristiano Ronaldo[0m
Fulfilling to fulfill order for Kylian Mbappe
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
[31mCould not find a supplier with stock to fulfill order for Kylian Mbappe[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 16:26:14.563549"], ["updated_at", "2023-07-12 16:26:14.563549"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.4ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 16:26:14.563987"], ["updated_at", "2023-07-12 16:26:14.563987"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 16:26:14.564798"], ["updated_at", "2023-07-12 16:26:14.564798"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 16:26:14.565083"], ["updated_at", "2023-07-12 16:26:14.565083"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 16:26:14.565495"], ["updated_at", "2023-07-12 16:26:14.565495"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 16:26:14.565755"], ["updated_at", "2023-07-12 16:26:14.565755"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:26:14.567683"], ["updated_at", "2023-07-12 16:26:14.567683"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 16:26:14.568186"], ["updated_at", "2023-07-12 16:26:14.568186"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Lionel Messi[0m
Fulfilling to fulfill order for Cristiano Ronaldo
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Cristiano Ronaldo[0m
Fulfilling to fulfill order for Kylian Mbappe
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
[31mCould not find a supplier with stock to fulfill order for Kylian Mbappe[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-12 16:26:14.576321"], ["updated_at", "2023-07-12 16:26:14.576321"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.1ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-12 16:26:14.576824"], ["updated_at", "2023-07-12 16:26:14.576824"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-12 16:26:14.577310"], ["updated_at", "2023-07-12 16:26:14.577310"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-12 16:26:14.577585"], ["updated_at", "2023-07-12 16:26:14.577585"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-12 16:26:14.582122"], ["updated_at", "2023-07-12 16:26:14.582122"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-12 16:26:14.582429"], ["updated_at", "2023-07-12 16:26:14.582429"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.1ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-12 16:26:14.582861"], ["updated_at", "2023-07-12 16:26:14.582861"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.0ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-12 16:26:14.583237"], ["updated_at", "2023-07-12 16:26:14.583237"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "orders"."supplier_id", "orders"."supplier_reference", "orders"."state" FROM "orders"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.0ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.6ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ? /* loading for inspect */ LIMIT ?[0m  [["state", "pending"], ["LIMIT", 11]]
  [1m[36mOrder Load (2.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ? /* loading for inspect */ LIMIT ?[0m  [["state", "pending"], ["LIMIT", 11]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ? /* loading for inspect */ LIMIT ?[0m  [["state", "pending"], ["LIMIT", 11]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Golden Boot"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Golden Boot"], ["created_at", "2023-07-13 12:39:18.451026"], ["updated_at", "2023-07-13 12:39:18.451026"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Lionel Messi"], ["product_id", 1], ["created_at", "2023-07-13 12:39:18.456362"], ["updated_at", "2023-07-13 12:39:18.456362"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Balon d Or"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Balon d Or"], ["created_at", "2023-07-13 12:39:18.462423"], ["updated_at", "2023-07-13 12:39:18.462423"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Cristiano Ronaldo"], ["product_id", 2], ["created_at", "2023-07-13 12:39:18.467377"], ["updated_at", "2023-07-13 12:39:18.467377"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Turtle Ninja Figurine"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Turtle Ninja Figurine"], ["created_at", "2023-07-13 12:39:18.473784"], ["updated_at", "2023-07-13 12:39:18.473784"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("customer_name", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["customer_name", "Kylian Mbappe"], ["product_id", 3], ["created_at", "2023-07-13 12:39:18.477775"], ["updated_at", "2023-07-13 12:39:18.477775"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-13 12:39:18.484136"], ["updated_at", "2023-07-13 12:39:18.484136"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.2ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_bar"], ["created_at", "2023-07-13 12:39:18.489790"], ["updated_at", "2023-07-13 12:39:18.489790"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "completed"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."state" = ?[0m  [["state", "pending"]]
Fulfilling to fulfill order for Lionel Messi
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers"[0m
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Load (0.1ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_bar"], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-13 12:39:18.544770"], ["updated_at", "2023-07-13 12:39:18.544770"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-13 12:39:18.553397"], ["updated_at", "2023-07-13 12:39:18.553397"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? AND "products"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL AND "products"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Test product name"], ["created_at", "2023-07-13 12:39:18.576882"], ["updated_at", "2023-07-13 12:39:18.576882"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Test product name"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "tEST PRODUCT NAME"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-13 12:39:18.598718"], ["updated_at", "2023-07-13 12:39:18.598718"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? AND "suppliers"."id" != ? LIMIT ?[0m  [["name", ""], ["id", 1], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" IS NULL AND "suppliers"."id" != ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-13 12:39:18.623709"], ["updated_at", "2023-07-13 12:39:18.623709"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mSupplier Load (0.2ms)[0m  [1m[34mSELECT "suppliers".* FROM "suppliers" ORDER BY "suppliers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "SUPPLIER_FOO"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mSupplier Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "suppliers" WHERE "suppliers"."name" = ? LIMIT ?[0m  [["name", "supplier_foo"], ["LIMIT", 1]]
  [1m[36mSupplier Create (0.3ms)[0m  [1m[32mINSERT INTO "suppliers" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "supplier_foo"], ["created_at", "2023-07-13 12:39:18.645364"], ["updated_at", "2023-07-13 12:39:18.645364"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mrollback transaction[0m
